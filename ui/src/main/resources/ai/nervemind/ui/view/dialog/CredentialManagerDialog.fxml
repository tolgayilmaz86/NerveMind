<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ButtonBar?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Priority?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<VBox xmlns="http://javafx.com/javafx/21"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="ai.nervemind.ui.view.dialog.CredentialManagerController"
      spacing="0"
      prefWidth="750"
      prefHeight="500"
      styleClass="credential-manager-dialog"
      stylesheets="@/ai/nervemind/ui/styles/variables.css, @/ai/nervemind/ui/styles/dialog.css">

    <!-- Header -->
    <VBox styleClass="credential-manager-dialog__header">
        <padding>
            <Insets top="16" right="20" bottom="16" left="20"/>
        </padding>
        <HBox spacing="12" alignment="CENTER_LEFT">
            <FontIcon iconLiteral="mdi2k-key" iconSize="28" styleClass="credential-manager-dialog__icon"/>
            <VBox spacing="2">
                <Label text="Credential Manager" styleClass="credential-manager-dialog__title"/>
                <Label text="Securely store and manage API keys and credentials" styleClass="credential-manager-dialog__subtitle"/>
            </VBox>
        </HBox>
    </VBox>

    <Separator/>

    <!-- Toolbar -->
    <HBox styleClass="credential-manager-dialog__toolbar" spacing="8" alignment="CENTER_LEFT">
        <padding>
            <Insets top="12" right="20" bottom="12" left="20"/>
        </padding>

        <Button fx:id="addButton" text="Add Credential" styleClass="button-primary" onAction="#onAddCredential">
            <graphic>
                <FontIcon iconLiteral="mdi2p-plus"/>
            </graphic>
        </Button>

        <Button fx:id="editButton" text="Edit" styleClass="button-outlined" onAction="#onEditCredential">
            <graphic>
                <FontIcon iconLiteral="mdi2p-pencil"/>
            </graphic>
        </Button>

        <Button fx:id="deleteButton" text="Delete" styleClass="button-outlined, danger" onAction="#onDeleteCredential">
            <graphic>
                <FontIcon iconLiteral="mdi2d-delete"/>
            </graphic>
        </Button>

        <Region HBox.hgrow="ALWAYS"/>

        <Button fx:id="refreshButton" styleClass="button-outlined" onAction="#onRefresh">
            <graphic>
                <FontIcon iconLiteral="mdi2r-refresh"/>
            </graphic>
            <tooltip>
                <Tooltip text="Refresh credential list"/>
            </tooltip>
        </Button>
    </HBox>

    <Separator/>

    <!-- Table -->
    <TableView fx:id="credentialTable" VBox.vgrow="ALWAYS" styleClass="credential-manager-dialog__table">
        <columns>
            <TableColumn fx:id="nameColumn" text="Name" prefWidth="200" minWidth="150"/>
            <TableColumn fx:id="typeColumn" text="Type" prefWidth="150" minWidth="100"/>
            <TableColumn fx:id="createdColumn" text="Created" prefWidth="140" minWidth="100"/>
            <TableColumn fx:id="updatedColumn" text="Updated" prefWidth="140" minWidth="100"/>
        </columns>
        <placeholder>
            <Label text="No credentials stored. Click 'Add Credential' to create one."/>
        </placeholder>
    </TableView>

    <Separator/>

    <!-- Footer -->
    <HBox styleClass="credential-manager-dialog__footer" alignment="CENTER_RIGHT">
        <padding>
            <Insets top="16" right="20" bottom="16" left="20"/>
        </padding>

        <ButtonBar>
            <buttons>
                <Button fx:id="closeButton" text="Close" onAction="#onClose" cancelButton="true"/>
            </buttons>
        </ButtonBar>
    </HBox>
</VBox>
