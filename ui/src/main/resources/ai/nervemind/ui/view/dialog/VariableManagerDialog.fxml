<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ButtonBar?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Priority?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<VBox xmlns="http://javafx.com/javafx/21"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="ai.nervemind.ui.view.dialog.VariableManagerController"
      spacing="0"
      prefWidth="800"
      prefHeight="500"
      styleClass="variable-manager-dialog"
      stylesheets="@/ai/nervemind/ui/styles/variables.css, @/ai/nervemind/ui/styles/dialog.css">

    <!-- Header -->
    <VBox styleClass="variable-manager-dialog__header">
        <padding>
            <Insets top="16" right="20" bottom="16" left="20"/>
        </padding>
        <Label text="Variable Manager" styleClass="variable-manager-dialog__title"/>
        <Label fx:id="headerSubtitle" styleClass="variable-manager-dialog__subtitle"/>
    </VBox>

    <Separator/>

    <!-- Toolbar -->
    <HBox styleClass="variable-manager-dialog__toolbar" spacing="8" alignment="CENTER_LEFT">
        <padding>
            <Insets top="12" right="20" bottom="12" left="20"/>
        </padding>

        <Button fx:id="addButton" styleClass="button-outlined" onAction="#onAddVariable">
            <graphic>
                <FontIcon iconLiteral="mdi2p-plus"/>
            </graphic>
            <tooltip>
                <Tooltip text="Add new variable"/>
            </tooltip>
        </Button>

        <Button fx:id="editButton" styleClass="button-outlined" onAction="#onEditVariable">
            <graphic>
                <FontIcon iconLiteral="mdi2p-pencil"/>
            </graphic>
            <tooltip>
                <Tooltip text="Edit selected variable"/>
            </tooltip>
        </Button>

        <Button fx:id="deleteButton" styleClass="button-outlined, danger" onAction="#onDeleteVariable">
            <graphic>
                <FontIcon iconLiteral="mdi2d-delete"/>
            </graphic>
            <tooltip>
                <Tooltip text="Delete selected variable"/>
            </tooltip>
        </Button>

        <Separator orientation="VERTICAL"/>

        <Button fx:id="refreshButton" styleClass="button-outlined" onAction="#onRefresh">
            <graphic>
                <FontIcon iconLiteral="mdi2r-refresh"/>
            </graphic>
            <tooltip>
                <Tooltip text="Refresh variable list"/>
            </tooltip>
        </Button>

        <Region HBox.hgrow="ALWAYS"/>

        <Label text="Filter by scope:"/>
        <ComboBox fx:id="scopeFilterCombo" promptText="All Scopes"/>
    </HBox>

    <Separator/>

    <!-- Table -->
    <TableView fx:id="variableTable" VBox.vgrow="ALWAYS" styleClass="variable-manager-dialog__table">
        <columns>
            <TableColumn fx:id="nameColumn" text="Name" prefWidth="180" minWidth="120"/>
            <TableColumn fx:id="typeColumn" text="Type" prefWidth="100" minWidth="80"/>
            <TableColumn fx:id="scopeColumn" text="Scope" prefWidth="100" minWidth="80"/>
            <TableColumn fx:id="valueColumn" text="Value" prefWidth="200" minWidth="100"/>
            <TableColumn fx:id="descriptionColumn" text="Description" prefWidth="200" minWidth="100"/>
        </columns>
        <placeholder>
            <Label text="No variables defined. Click '+' to add a variable."/>
        </placeholder>
    </TableView>

    <Separator/>

    <!-- Footer -->
    <HBox styleClass="variable-manager-dialog__footer" alignment="CENTER_RIGHT">
        <padding>
            <Insets top="16" right="20" bottom="16" left="20"/>
        </padding>

        <ButtonBar>
            <buttons>
                <Button fx:id="closeButton" text="Close" onAction="#onClose" cancelButton="true"/>
            </buttons>
        </ButtonBar>
    </HBox>
</VBox>
